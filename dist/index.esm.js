import{jsx as t,jsxs as e}from"react/jsx-runtime";import{useState as n,useRef as r,useEffect as o,createContext as i,useContext as a}from"react";import{useMotionValue as u,useSpring as l,motion as c,AnimatePresence as s}from"framer-motion";var d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},d.apply(this,arguments)};function f(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var m=function(){var t=n({x:0,y:0}),e=t[0],i=t[1],a=n(!1),u=a[0],l=a[1],c=r(null);return o((function(){l(!0);var t=function(t){null===c.current&&(c.current=requestAnimationFrame((function(){i({x:t.clientX-15,y:t.clientY-15}),c.current=null})))};return window.addEventListener("mousemove",t),function(){window.removeEventListener("mousemove",t),null!==c.current&&cancelAnimationFrame(c.current)}}),[]),u?e:{x:0,y:0}},v={default:{width:24,height:24,scale:1,shape:"circle",color:"rgba(255, 255, 255, 0.8)",opacity:1,borderColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderStyle:"solid",label:"",fontSize:"12px",fontWeight:"bold",labelColor:"#000",transition:{stiffness:300,damping:30,mass:1}}},p=i({cursorState:d(d({},v.default),{variant:"default"}),setCursorVariant:function(){},config:v,mousePosition:{x:0,y:0},resetCursorToDefault:function(){}}),h=function(){return a(p)},g=function(e){var i,a=e.children,u=e.config,l=void 0===u?v:u,c=e.hideNativeCursor,s=void 0===c||c,h=m(),g=n(["default"]),y=g[0],b=g[1],x=r(Date.now()),w=r(null),C=function(){b(["default"])};o((function(){var t=function(t){x.current=Date.now(),w.current&&(clearTimeout(w.current),w.current=null);var e=document.elementFromPoint(t.clientX,t.clientY);e&&(e.hasAttribute("data-cursor-target")||e.closest("[data-cursor-target]"))||"default"===y[y.length-1]||(w.current=setTimeout((function(){var e=document.elementFromPoint(t.clientX,t.clientY);(!e||!e.hasAttribute("data-cursor-target")&&!e.closest("[data-cursor-target]"))&&C()}),0))};return document.addEventListener("mousemove",t,{passive:!0}),function(){document.removeEventListener("mousemove",t),w.current&&clearTimeout(w.current)}}),[y]);var T=y[y.length-1],E=null!==(i=l[T])&&void 0!==i?i:l.default,S=d(d({},E),{variant:T});return o((function(){if(s){var t=document.createElement("style");return t.textContent='\n        body, a, button, [role="button"], * {\n          cursor: none !important;\n        }\n      ',document.head.appendChild(t),function(){document.head.removeChild(t)}}}),[s]),t(p.Provider,{value:{cursorState:S,setCursorVariant:function(t,e){void 0===e&&(e="push"),w.current&&(clearTimeout(w.current),w.current=null),"reset"===e?b(["default"]):"push"===e?function(t){b((function(e){return f(f([],e,!0),[t],!1)}))}(t):b((function(t){var e=f([],t,!0);return e.pop(),e.length?e:["default"]}))},resetCursorToDefault:C,config:l,mousePosition:h},children:a})},y=function(i){var a,m,v,p,g=i.size,y=void 0===g?24:g,b=i.zIndex,x=void 0===b?9999:b,w=i.showOnTouch,C=void 0!==w&&w,T=i.trailLength,E=void 0===T?10:T,S=h(),L=S.cursorState,P=S.mousePosition,A=n(!1),z=A[0],M=A[1],W=n(!1),D=W[0],F=W[1],j=r([]),O=u(P.x),B=u(P.y),I={damping:(null===(a=L.transition)||void 0===a?void 0:a.damping)||30,stiffness:(null===(m=L.transition)||void 0===m?void 0:m.stiffness)||300,mass:(null===(v=L.transition)||void 0===v?void 0:v.mass)||1},V=l(O,I),X=l(B,I);if(o((function(){j.current=f([P],j.current.slice(0,E-1),!0),O.set(P.x),B.set(P.y)}),[P,O,B,E]),o((function(){var t;t="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,F(t);var e=setTimeout((function(){M(!0)}),100);return function(){return clearTimeout(e)}}),[]),D&&!C)return null;return t(c.div,{style:{position:"fixed",left:0,top:0,x:V,y:X,zIndex:x,pointerEvents:"none",opacity:z?1:0,willChange:"transform",mixBlendMode:L.mixBlendMode||"normal"},children:e(c.div,{style:{borderStyle:L.borderStyle||"solid",display:"flex",justifyContent:"center",alignItems:"center",transform:"translate(-50%, -50%)",willChange:"transform, width, height, background-color"},animate:{width:L.width||y,height:L.height||y,borderRadius:"circle"===L.shape?"50%":"square"===L.shape&&L.borderRadius||0,backgroundColor:"custom"===L.shape?"rgba(0, 0, 0, 0)":L.color||"rgba(255, 255, 255, 0.8)",opacity:L.opacity||1,borderColor:L.borderColor||"rgba(0, 0, 0, 0)",borderWidth:L.borderWidth||0,scale:void 0!==L.scale?L.scale:1},transition:d({type:"spring"},I),children:["custom"===L.shape&&L.customElement,t(s,{mode:"wait",children:L.label&&t(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},style:{fontSize:L.fontSize||"12px",fontWeight:L.fontWeight||"bold",color:L.labelColor||"#000",textAlign:"center",userSelect:"none",whiteSpace:"nowrap"},children:L.label},"string"==typeof L.label?L.label:"label")}),null===(p=L.innerElements)||void 0===p?void 0:p.map((function(e,n){var r=e.transition||{stiffness:100,damping:15,mass:3},o=j.current[Math.min(n+1,j.current.length-1)]||P,i=o?P.x-o.x:0,a=o?P.y-o.y:0;return t(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,x:.5*-i,y:.5*-a},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},transition:{type:"spring",damping:r.damping||15,stiffness:r.stiffness||100,mass:r.mass||3},children:e.element},"inner-".concat(n))}))]})})},b=function(t){var e=t.variant,n=t.onEnter,i=t.onLeave,a=h(),u=a.setCursorVariant,l=a.resetCursorToDefault,c=r(null),s=r(!1);o((function(){return function(){c.current&&clearTimeout(c.current)}}),[]);return{onMouseEnter:function(){c.current&&(clearTimeout(c.current),c.current=null),s.current=!0,u(e,"push"),null==n||n()},onMouseLeave:function(t){var e,n;s.current=!1;var r=t.relatedTarget;r&&((null===(e=r.hasAttribute)||void 0===e?void 0:e.call(r,"data-cursor-target"))||(null===(n=r.closest)||void 0===n?void 0:n.call(r,"[data-cursor-target]")))||u("","pop"),c.current=setTimeout((function(){s.current||l()}),0),null==i||i()},onFocus:function(){c.current&&(clearTimeout(c.current),c.current=null),s.current=!0,u(e,"push"),null==n||n()},onBlur:function(){s.current=!1,u("","pop"),c.current=setTimeout((function(){s.current||l()}),0),null==i||i()},"data-cursor-target":!0}},x=function(e){var n=e.children,r=e.variant,o=e.onEnter,i=e.onLeave,a=b({variant:r,onEnter:o,onLeave:i});return t("div",d({},a,{"data-cursor-variant":r,"data-cursor-target":!0,children:n}))};export{y as Cursor,g as CursorProvider,x as CursorTarget,b as useCursor,m as useMousePosition};
//# sourceMappingURL=index.esm.js.map
